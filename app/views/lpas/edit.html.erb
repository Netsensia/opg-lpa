<%= form_for @lpa do |lpa_form| %>
LPA:
  <%= lpa_form.label :type %>
  <%= lpa_form.select :type, ["Financial", "Welfare"] %>
Donor:
  <%= lpa_form.fields_for @lpa.donor do |donor_form| %> 
    <%= donor_form.label "title" %>
    <%= donor_form.select "title", ["Mr", "Ms"] %>
    <%= donor_form.label "first_name" %>
    <%= donor_form.text_field "first_name" %>
    <%= donor_form.label "middle_names" %>
    <%= donor_form.text_field "middle_names" %>
    <%= donor_form.label "last_name" %>
    <%= donor_form.text_field "last_name" %>
    <%= donor_form.fields_for donor_form.object.address do |donor_address_form| %> 
      <%= donor_address_form.label "post_code" %>
      <%= donor_address_form.text_field "post_code" %>
      <%= donor_address_form.label "address_line1" %>
      <%= donor_address_form.text_field "address_line1" %>
      <%= donor_address_form.label "address_line2" %>
      <%= donor_address_form.text_field "address_line2" %>
      <%= donor_address_form.label "address_line3" %>
      <%= donor_address_form.text_field "address_line3" %>
      <%= donor_address_form.label "town" %>
      <%= donor_address_form.text_field "town" %>
      <%= donor_address_form.label "county" %>
      <%= donor_address_form.text_field "county" %>
      <%= donor_address_form.label "country" %>
      <%= donor_address_form.text_field "country" %>
    <% end %>
  <% end %>
Attorney:
  <% @lpa.attorneys.each do |attorney| %>
  <%= lpa_form.fields_for "attorneys[]", attorney do |attorney_form| %>
    <%= attorney_form.label "title" %>
    <%= attorney_form.select "title", ["Mr", "Ms"] %>
    <%= attorney_form.label "first_name" %>
    <%= attorney_form.text_field "first_name" %>
    <%= attorney_form.label "middle_names" %>
    <%= attorney_form.text_field "middle_names" %>
    <%= attorney_form.label "last_name" %>
    <%= attorney_form.text_field "last_name" %>
    <%= attorney_form.fields_for :address do |attorney_address_form| %> 
      <%= attorney_address_form.label "post_code" %>
      <%= attorney_address_form.text_field "post_code" %>
      <%= attorney_address_form.label "address_line1" %>
      <%= attorney_address_form.text_field "address_line1" %>
      <%= attorney_address_form.label "address_line2" %>
      <%= attorney_address_form.text_field "address_line2" %>
      <%= attorney_address_form.label "address_line3" %>
      <%= attorney_address_form.text_field "address_line3" %>
      <%= attorney_address_form.label "town" %>
      <%= attorney_address_form.text_field "town" %>
      <%= attorney_address_form.label "county" %>
      <%= attorney_address_form.text_field "county" %>
      <%= attorney_address_form.label "country" %>
      <%= attorney_address_form.text_field "country" %>
    <% end %>
    <% end %>

  <% end %>

  <%= lpa_form.submit "Save and continue" %>
<% end %>